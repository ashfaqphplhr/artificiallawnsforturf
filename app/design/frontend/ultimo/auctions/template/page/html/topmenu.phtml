<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Top menu for store
 *
 * @see Mage_Catalog_Block_Navigation
 */
?>
<?php
/**
 * $this->renderCategoriesMenuHtml() supports optional arguments:
 * bool Add opener if menu is used as accordion
 * int Level number for list item class to start from
 * string Extra class of outermost list items
 * string If specified wraps children list in div with this class
 */
?>
<?php $_menu = $this->renderCategoriesMenuHtml(FALSE, 0,'level-top'); ?>
<?php //$_menu = $this->getHtml('level-top'); ?>

<?php
	$theme = $this->helper('ultimo');
	$d = $theme->getDesignCfgSection();
	
	$navContainerCss = array();
	$menuCss = array();
	if ($theme->getCfg('mainmenu/standard_menu'))
	{
		$menuCss[] = 'classic';
	}
	if ($theme->getCfg('mainmenu/wide_menu'))
	{
		$menuCss[] = 'wide';
		
		$navContainerCss[] = 'itemgrid';
		$navContainerCss[] = 'itemgrid-' . $theme->getCfg('mainmenu/level2_column_count') . 'cols';
	}

	$navCss = array();
	if ($d['nav']['stretched'])
		$navCss[] = 'stretched';
	
	//If header or main have bg color
	if ($theme->isColor($d['header']['inner_bg_color']))
	{
		$navCss[] = 'show-bg';
	}
	elseif ($theme->isColor($d['main']['inner_bg_color']))
	{
		$navCss[] = 'show-bg';
	}
?>
<div class="nav-container<?php if($navContainerCss) echo " " . implode(" ", $navContainerCss); ?>">
	<div class="nav clearer<?php if($navCss) echo " " . implode(" ", $navCss); ?>">
    
		<div id="mobnav-menu">
        	<div id="mobnav-trigger-menu">
            	<div class="icon"><div class="line"></div><div class="line"></div><div class="line"></div></div>
				<input id="menutop" name="accordion-1" type="checkbox" />
                <label for="menutop"><?php echo $this->__('Menu'); ?></label>
				<ul class="links-menu">
					<li class="toplink"><a href="<?php echo $this->getUrl() ?>"><?php echo $this->__('Home') ?></a></li>
					<li class="toplink"><a href="<?php echo $this->getUrl('about-us') ?>"><?php echo $this->__('ABOUT US') ?></a></li>
					<li class="toplink"><a href="<?php echo $this->getUrl('warranty') ?>"><?php echo $this->__('WARRANTY') ?></a></li>
					<li class="toplink"><a href="<?php echo $this->getUrl('diy-maintenance') ?>"><?php echo $this->__('DIY & MAINTENANCE') ?></a></li>
					<li class="toplink"><a href="http://blog.noworriesturf.com.au" target="_blank"><?php echo $this->__('BLOG') ?></a></li>
					<li class="toplink"><a href="<?php echo $this->getUrl('contacts') ?>"><?php echo $this->__('CONTACT US') ?></a></li>
					<li class="toplink"><a href="<?php echo $this->getUrl('gallery') ?>"><?php echo $this->__('GALLERY') ?></a></li>
					<li class="toplink">
						<?php
						 $loggedIn = $this->helper("customer")->isLoggedIn();
						 if($loggedIn == 1){ echo "<a title='Log Out' href=\"".Mage::getBaseUrl()."customer/account/logout/\" />LOG OUT</a>"; }
						 else{ echo "<a title='Log In' href=\"".Mage::getBaseUrl()."customer/account/\" />LOGIN</a>"; }
						 ?>
					</li>
					<li><a href="<?php echo $this->getUrl('checkout/cart') ?>"><?php echo $this->__('SHOPPING CART') ?></a></li>
				</ul>
			</div>
        </div>
    	<div id="mobnav" class="grid-full">
        	<a id="mobnav-trigger" href="">
            	<div class="icon"><div class="line"></div><div class="line"></div><div class="line"></div></div>
                <span><?php echo $this->__('Categories'); ?></span>
			</a>
        </div>
        
        <ul class="accordion vertnav-top grid-full">
			<li class="level0 nav-0 level-top parent">
				<a href="http://www.noworriesturf.com.au/landscaping-synthetic-grass.html" class="level-top">
					<span>Landscaping Synthetic Grass</span>
				</a>
				<span class="opener" id="mfa21">&nbsp;</span>
				<ul class="level0">
					<li class="level0 nav-2-1 first item">
					<a href="http://www.noworriesturf.com.au/home-domestic-synthetic-lawn.html">
						<span>Home & Domestic Synthetic Lawn</span>
					</a>
					</li>
					<li class="level0 nav-2-2 item">
					<a href="http://www.noworriesturf.com.au/commercial-projects-synthetic-grass.html">
						<span>Commercial Projects Synthetic Grass</span>
					</a>
					</li>
					<li class="level0 nav-2-3 item">
					<a href="http://www.noworriesturf.com.au/schools-kinder-grass.html">
						<span>Schools & Kinder Grass</span>
					</a>
					</li>
				</ul>
			</li>
			<?php echo $this->renderCategoriesMenuHtml(TRUE, 0,'level-top'); ?>
        </ul>
    
    	<ul id="nav" class="grid-full<?php if($menuCss) echo " " . implode(" ", $menuCss); ?>">
        
		<li class="level0 nav-0 level-top parent">
			<a href="http://www.noworriesturf.com.au/landscaping-synthetic-grass.html" class="level-top">
				<span>Landscaping Synthetic Grass</span>
			</a>
			<ul class="level0">
				<li class="level0 nav-2-1 first item">
				<a href="http://www.noworriesturf.com.au/home-domestic-synthetic-lawn.html">
					<span>Home & Domestic Synthetic Lawn</span>
				</a>
				</li>
				<li class="level0 nav-2-2 item">
				<a href="http://www.noworriesturf.com.au/commercial-projects-synthetic-grass.html">
					<span>Commercial Projects Synthetic Grass</span>
				</a>
				</li>
				<li class="level0 nav-2-3 item">
				<a href="http://www.noworriesturf.com.au/schools-kinder-grass.html">
					<span>Schools & Kinder Grass</span>
				</a>
				</li>
			</ul>
		</li>
        <?php //Display "Home" link, if enabled ?>
		<?php if ($theme->getCfg('mainmenu/home')): ?>
            <li id="nav-home-link" class="level0 level-top">
            	<?php if ($theme->getCfg('mainmenu/home_img')): ?>
                <a class="home-img level-top" href="<?php echo $this->getBaseUrl(); ?>"><?php echo $this->__('Home'); ?></a>
                <?php else: ?>
                <a class="level-top" href="<?php echo $this->getBaseUrl(); ?>"><span><?php echo $this->__('Home'); ?></span></a>
                <?php endif; ?>
            </li>
        <?php endif; ?>

		<?php echo $_menu; //Main menu ?>

		<?php //Display static block as a drop-down ?>
        <?php if ($tmpHtml = $this->getChildHtml('block_header_nav_dropdown')): ?>
        	<li class="nav-custom-link level0 level-top parent<?php if ($theme->getCfg('mainmenu/custom_block_floating')) echo ' f-right'; ?>">
            	<?php // Get the block title, and display it as tab title
                    $blockTitle = Mage::getModel('cms/block')
						->setStoreId(Mage::app()->getStore()->getId())
						->load('block_header_nav_dropdown')
						->getTitle();
				?>
                <a class="level-top" href="#"><span><?php echo $blockTitle; ?></span></a>
                <ul class="level0">
                	<div class="header-nav-dropdown-wrapper clearer"><?php echo $tmpHtml; ?></div>
                </ul>
            </li>
		<?php endif; ?>
		</ul>
	</div> <!-- end: nav -->
</div> <!-- end: nav-container -->
